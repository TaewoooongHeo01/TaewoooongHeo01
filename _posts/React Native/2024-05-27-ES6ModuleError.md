---
layout: post
title: Babel asynchronously ì—ëŸ¬ í•´ê²° - ECMAScript module configuration file
category: React Native
published: true
excerpt: "ì²˜ìŒì— ë‚´ê°€ ìƒê°í•œ ì›ì¸ì€ ë‹¤ìŒê³¼ ê°™ì•˜ë‹¤. nodeJS ì˜ ê¸°ë³¸ ëª¨ë“ˆ ì‹œìŠ¤í…œì€ commonJS ë‹¤. ê·¸ëŸ°ë° í˜„ì¬ ECMAScript ê°€ ì‚¬ìš©ëœ ë¶€ë¶„ì´ ê°ì§€ë˜ì—ˆë‹¤. ê·¸ë˜ì„œ Babel ì„ ì´ìš©í•´ ì»´íŒŒì¼ í•´ì¤˜ì•¼ í•˜ëŠ”ë°, Babel ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ” ê²ƒ ê°™ë‹¤.ì¼ë‹¨ ëŒ€ì¶© ì´ë ‡ê²Œ ê°ì„ ì¡ì•˜ë‹¤. ê·¸ëŸ°ë° ì—ëŸ¬ ë©”ì„¸ì§€ì—ì„œ ëª‡ ê°€ì§€ ê¶ê¸ˆí•œ ì ë“¤ì´ ìƒê²¼ë‹¤. ì´ëŸ¬í•œ ì°¨ì´ ë•Œë¬¸ì— Babelì´ ES6 ëª¨ë“ˆì„ CommonJSë¡œ ë³€í™˜í•˜ê¸° ìœ„í•´ì„œëŠ” ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì–´ì•¼ í•œë‹¤ê³  í•˜ëŠ” ê²ƒì´ë‹¤. Babelì´ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤ëŠ” ê²ƒì€, ES6 ë¥¼ ì§€ì›í•˜ê¸° ìœ„í•´ íŒŒì¼ì„ ì½ê³  ë³€í™˜í•˜ëŠ” ê³¼ì •ì´ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬ëœë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤."
---

## ì—ëŸ¬ ë°œìƒ ìƒí™©
expo ë¥¼ í†µí•´ React Native í”„ë¡œì íŠ¸ í™˜ê²½ì„ ì¤€ë¹„í•˜ê³  ìˆì—ˆë‹¤. 

ios ì‹œë®¬ë ˆì´í„°ê¹Œì§€ ì„¸íŒ…í•˜ê³  npx expo start ë¡œ ì‹œì‘í•˜ìë§ˆì ì—ëŸ¬ë¥¼ ë§Œë‚¬ë‹¤. 
![](https://i.imgur.com/wb6QN84.png)

>"You appear to be using a native ECMAScript module configuration file, which is only supported when running Babel asynchronously"

ê·¸ëŒ€ë¡œ ë²ˆì—­í•˜ë©´ "Babelì„ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰í•  ë•Œë§Œ ì§€ì›ë˜ëŠ” ê¸°ë³¸ ECMAScript ëª¨ë“ˆ êµ¬ì„± íŒŒì¼ì„ ì‚¬ìš©í•˜ê³  ìˆëŠ” ê²ƒ ê°™ë‹¤" ë¼ê³  í•œë‹¤. 

ì¼ë‹¨ ë¬¸ì œì˜ ì›ì¸ì„ ì •í™•í•˜ê²Œ íŒŒì•…í•˜ê¸° ìœ„í•´ ê° êµ¬ì„±ìš”ì†Œì— ëŒ€í•´ ì •í™•íˆ ì•Œì•„ì•¼ í–ˆë‹¤
## ğŸ¤” Babel ì´ë€?
>Babel is a Javascript compiler 

[docs - What is Babel?](https://babeljs.io/docs/)

ë°”ë²¨ì€ ìë°”ìŠ¤í¬ë¦½íŠ¸ ì»´íŒŒì¼ëŸ¬ë‹¤. ì»´íŒŒì¼ëŸ¬ëŠ” í”„ë¡œê·¸ë˜ë° ì–¸ì–´ë¡œ ì‘ì„±ëœ ì½”ë“œë¥¼ ê¸°ê³„ì–´ë¡œ ë°”ê¿”ì£¼ëŠ” ì—­í• ì„ í•œë‹¤. 

í•˜ì§€ë§Œ ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì¸í„°í”„ë¦¬í„° ì–¸ì–´ì¸ë°, ì™œ ì»´íŒŒì¼ëŸ¬ê°€ í•„ìš”í• ê¹Œ?

ê·¸ ì´ìœ ëŠ” ëª¨ë“  ë¸Œë¼ìš°ì €ê°€ ìµœì‹  ë¬¸ë²•ê³¼ ê¸°ëŠ¥(ES6 ì´ìƒ)ì„ ì§€ì›í•˜ì§€ ì•Šê¸° ë•Œë¬¸ì— ìµœì‹  ìë°”ìŠ¤í¬ë¦½íŠ¸ ì½”ë“œ(ES6 ì´ìƒ)ë¥¼ ì´ì „ ë²„ì „(ES5)ìœ¼ë¡œ ë³€í™˜í•˜ëŠ” ì‘ì—…ì´ í•„ìš”í•˜ê¸° ë•Œë¬¸ì´ë‹¤.

ì¦‰, ì´ ë§¥ë½ì—ì„œ ìë°”ìŠ¤í¬ë¦½íŠ¸ëŠ” ì¸í„°í”„ë¦¬í„° ì–¸ì–´ì´ì§€ë§Œ, ëª¨ë“  ë¸Œë¼ìš°ì €ì™€ í˜¸í™˜ë˜ê¸° ìœ„í•´ Babelì´ë¼ëŠ” ì»´íŒŒì¼ëŸ¬ë¥¼ ì‚¬ìš©í•œë‹¤ê³  ì´í•´í•  ìˆ˜ ìˆë‹¤. Babelì€ ìµœì‹  ë¬¸ë²•ì„ êµ¬í˜• ë¸Œë¼ìš°ì €ì—ì„œë„ ë™ì‘í•  ìˆ˜ ìˆë„ë¡ ë³€í™˜í•´ì¤€ë‹¤.
## CommonJS ì™€ ECMAScript
CommonJS ëª¨ë“ˆ ì‹œìŠ¤í…œì´ë‹¤. NodeJS ì˜ ê¸°ë³¸ ëª¨ë“ˆ ì‹œìŠ¤í…œìœ¼ë¡œ ì±„íƒë˜ì—ˆë‹¤. 
{% highlight JS%}
// add.js
module.exports.add = (x, y) => x + y;

// main.js
const { add } = require('./add');

add(1, 2);
{% endhighlight %}

ECMAScript Modules (ESM) ëŠ” ìë°”ìŠ¤í¬ë¦½íŠ¸ ëª¨ë“ˆ ì‹œìŠ¤í…œì˜ ìµœì‹  í‘œì¤€ìœ¼ë¡œ, ES6 (ECMAScript 2015)ì—ì„œ ë„ì…ë˜ì—ˆë‹¤. 
{% highlight JS%}
// add.js
export function add(x, y) {
  return x + y
}

// main.js
import { add } from './add.js';

add(1, 2);
{% endhighlight %}

CommonJS ëŠ” `require` / `module.exports` ë¥¼ ì‚¬ìš©í•˜ê³ , ESMì€ `import` / `export` ì„ ì‚¬ìš©í•œë‹¤. ë˜í•œ CommonJS ëŠ” ë™ê¸°ì ìœ¼ë¡œ, ESM ì€ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë™ì‘í•œë‹¤ëŠ” ì°¨ì´ê°€ ìˆë‹¤. 
## ì›ì¸?
ì´ì œ ì›ì¸ì„ ë¶„ì„í•´ë³´ê² ë‹¤. ì—ëŸ¬ë¥¼ ë‹¤ì‹œ ì‚´í´ë³´ì. 

>"You appear to be using a native ECMAScript module configuration file, which is only supported when running Babel asynchronously"

ì²˜ìŒì— ë‚´ê°€ ìƒê°í•œ ì›ì¸ì€ ë‹¤ìŒê³¼ ê°™ì•˜ë‹¤. 

"nodeJS ì˜ ê¸°ë³¸ ëª¨ë“ˆ ì‹œìŠ¤í…œì€ commonJS ë‹¤. ê·¸ëŸ°ë° í˜„ì¬ ECMAScript ê°€ ì‚¬ìš©ëœ ë¶€ë¶„ì´ ê°ì§€ë˜ì—ˆë‹¤. ê·¸ë˜ì„œ Babel ì„ ì´ìš©í•´ ì»´íŒŒì¼ í•´ì¤˜ì•¼ í•˜ëŠ”ë°, Babel ì •ìƒì ìœ¼ë¡œ ë™ì‘í•˜ì§€ ì•ŠëŠ” ê²ƒ ê°™ë‹¤."

ì¼ë‹¨ ëŒ€ì¶© ì´ë ‡ê²Œ ê°ì„ ì¡ì•˜ë‹¤. ê·¸ëŸ°ë° ì—ëŸ¬ ë©”ì„¸ì§€ì—ì„œ ëª‡ ê°€ì§€ ê¶ê¸ˆí•œ ì ë“¤ì´ ìƒê²¼ë‹¤. 

ë°”ë¡œ "Babel ì´ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì–´ì•¼ í•œë‹¤" ë¼ëŠ” ë¶€ë¶„ì´ë‹¤.Babelì´ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ë˜ì–´ì•¼ í•œë‹¤ëŠ” ê²Œ ë¬´ìŠ¨ ì˜ë¯¸ì¼ê¹Œ?

ì‚¬ì‹¤, ì´ ë§ì€ ES6ì™€ CommonJSì˜ ì°¨ì´ì—ì„œ ë¹„ë¡¯ëœë‹¤. CommonJS ë¬¸ë²•ì„ ë³´ë©´ `require()` í•¨ìˆ˜ë¥¼ í†µí•´ ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.
{% highlight JS%}
const { add } = require('./add');
{% endhighlight %}
ì´ ê²½ìš° ì½”ë“œëŠ” ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤. ì¦‰, ì½”ë“œê°€ ìˆœì°¨ì ìœ¼ë¡œ ì‹¤í–‰ë˜ëŠ” ê²ƒì´ë‹¤. 

í•˜ì§€ë§Œ ES6 ì˜ `import` ëŠ” ë„¤íŠ¸ì›Œí¬ë¥¼ í†µí•´ ëª¨ë“ˆì„ ë¡œë“œí•˜ê¸° ë•Œë¬¸ì— ë¹„ë™ê¸°ì ìœ¼ë¡œ ëª¨ë“ˆì„ ë¶ˆëŸ¬ì˜¨ë‹¤. 
{% highlight JS%}
import { add } from './add.js';
{% endhighlight %}

ì´ëŸ¬í•œ ì°¨ì´ ë•Œë¬¸ì— Babelì´ ES6 ëª¨ë“ˆì„ CommonJSë¡œ ë³€í™˜í•˜ê¸° ìœ„í•´ì„œëŠ” "ë¹„ë™ê¸°ì "ìœ¼ë¡œ ì‹¤í–‰ë˜ì–´ì•¼ í•œë‹¤ê³  í•˜ëŠ” ê²ƒì´ë‹¤. Babelì´ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì‹¤í–‰ëœë‹¤ëŠ” ê²ƒì€, ES6 ë¥¼ ì§€ì›í•˜ê¸° ìœ„í•´ íŒŒì¼ì„ ì½ê³  ë³€í™˜í•˜ëŠ” ê³¼ì •ì´ ë¹„ë™ê¸°ì ìœ¼ë¡œ ì²˜ë¦¬ëœë‹¤ëŠ” ì˜ë¯¸ì´ë‹¤.
# í•´ê²° ë°©ë²•
nodeJS ê°€ ES6 ì„ ì¸ì‹í•˜ê¸° ìœ„í•´ì„  Babel ì„ ì„¤ì •í•´ì¤˜ì•¼ í•œë‹¤.

`babel.config.js`ê°€ CommonJSë¡œ ì‘ì„±ë˜ì–´ ìˆì–´ íŒŒì¼ í™•ì¥ìë¥¼ ìˆ˜ì •í•´ì•¼ í•œë‹¤.
Babel.config.js -> Babel.config.cjs
![](https://i.imgur.com/bpmzAib.png)

ê·¸ë¦¬ê³  babel.config.cjs ì˜ ì˜µì…˜ì„ ë‹¤ìŒê³¼ ê°™ì´ ìˆ˜ì •í•œë‹¤. 
{% highlight JS%}
module.exports = {
  presets: [
    [
      '@babel/preset-env',
      {
        targets: {
          node: 'current'
        }
      }
    ]
  ]
};
{% endhighlight %}
ì—¬ê¸°ì„œ `@babel/preset-env` ëŠ” ê°€ì¥ ë§ì´ ì‚¬ìš©ë˜ëŠ” Babel í”„ë¦¬ì…‹ ì¤‘ í•˜ë‚˜ë¡œ, ìµœì‹  JavaScript ê¸°ëŠ¥ì„ í˜¸í™˜ ê°€ëŠ¥í•œ ë²„ì „ìœ¼ë¡œ ë³€í™˜í•œë‹¤.

ë˜í•œ `targets` ì˜µì…˜ì„ í†µí•´ í˜„ì¬ Node.js ë²„ì „ì— ë§ì¶° ì½”ë“œë¥¼ ë³€í™˜í•˜ë„ë¡ ì„¤ì •í•œë‹¤.

ë§ˆì§€ë§‰ìœ¼ë¡œ package.json ì— `"type": "module"` ì„ ì¶”ê°€í•œë‹¤.
![](https://i.imgur.com/A9WWRPA.png)

#### Reference
- [CommonJSì™€ ESMì— ëª¨ë‘ ëŒ€ì‘í•˜ëŠ” ë¼ì´ë¸ŒëŸ¬ë¦¬ ê°œë°œí•˜ê¸°: exports field](https://toss.tech/article/commonjs-esm-exports-field)

