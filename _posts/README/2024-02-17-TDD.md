---
layout: post
title: TDD(테스트 주도 개발) 에 대하여
category: README
published: true
excerpt: "이렇게 테스트 코드 정의를 통해 목적을 명시하고 중간중간 수많은 리팩토링이 있기 때문에 클린코드를 작성하는데 좋은 것이다. 유지보수, 버그 예방 측면에서도 좋다.실제로 TDD 를 적용한 경우 결함율(버그)가 약 40~90% 정도 줄어들었다는 사례가 있다(Microsoft, IBM) 하지만 이러한 TDD 는 장점만 있는게 아니다. 작용 반작용이 있듯이 단점도 존재한다. 가장 큰 단점은 생산성의 저하이다. 아무래도 중간중간 수많은 테스트와 리팩토링 때문에 개발 시간 자체가 오래 걸린다는 것이다.나는 TDD 가 기존의 전통적인 개발 프로세스에 비해 구조 상 안정적인 방법임에는 틀림없다고 생각한다. 하지만 시장에 빠르게 기능을 출시하고 검증해야 하는 경우라면 어떨까? 나는 이 경우엔 일부만 TDD 를 적용하고 추후 점진적으로 리팩토링 하는 것이 좋다고 생각한다. 오랜 시간을 들여 코드를 깔끔하게 작성해놨더니 시장에서 실패한다면 비효율이 발생하기 때문이다."
---

저번에 개발 컨퍼런스에 갔다가 TDD 에 관한 이야기를 들었다. 내용 중 TDD 의 중요성을 언급하는 부분이 있었다. 평소엔 TDD 가 단순히 단위테스트를 만들어 테스트하는? 그런 느낌으로만 알고 있어서 이번 기회에 자세하게 공부해봤다. 

TDD 는 Test-driven development 의 약자로써 테스트 주도 개발을 의미한다. 용어만 보면 테스트와 관련한 개발 방법론 같은 느낌이다. 실제로도 그렇다. TDD 는 테스트 코드부터 작성한다. 

TDD 개발 주기는 다음과 같다. 

- RED: 실패하는 테스트를 만든다. 처음엔 해당 기능을 구현하는 실제 코드가 없으므로 실패하는게 당연하다.
- GREEN: 이전에 만든 테스트가 성공할 수 있도록 최소한으로 구현만 한다. 
- REFACTOR: 성공한 테스트 코드를 리팩토링한다. 

전체적인 흐름은 실패하는 테스트 코드를 먼저 만들고, 최소한의 기능으로 구현한 뒤 리팩토링을 하는 것이다. 그리고 이걸 계속 반복한다. 

이렇게 테스트를 먼저 작성하면 불필요한 설계를 피하고 요구사항에 집중할 수 있게 된다. 

기존의 전통적인 개발 프로세스는 다음과 같다. 
{% highlight Text%}
디자인 -> 코드작성 -> 테스트
{% endhighlight %}
나도 평소엔 이렇게 개발했고, 아마 대부분의 개발자들이 이렇게 할 것같다(아마?)
하지만 이 방법엔 몇 가지 문제가 있다. 버그 검출이 힘들어지고, 소스코드의 품질도 저하되며, 테스트 비용도 증가한다. 이러한 문제가 생기는 근본적인 원인은 `처음부터 완벽한 설계`가 불가능 하기 때문이다. 

예를 들어 회원 가입 기능을 다 만들고 테스트를 끝냈다고 해보자. 근데 갑자기 이메일 인증 기능을 추가해야 한다. 이처럼 직접 개발을 하다보면 요구사항 추가, 설계 오류 등 다양한 외부 조건들이 있다. 따라서 무작정 코드부터 작성하게 되면 위와 같은 문제를 겪는 것이다. 

실제로 나도 그랬다. 생각나는대로 바로 기능들을 추가하고 서로 다른 메서드들끼리 엇갈리면서 정말 헷갈렸다. 물론 기능 자체는 수행되었지만 추후 유지보수나 기능 추가들을 할 때 쉽지 않을 것 같다는 생각이 들었다. 

TDD 의 목적은 코드의 품질과 유지보수성을 향상시키는 것이다. TDD 가 전통적인 개발 프로세스와 달리 이러한 목적을 쉽게 달성할 수 있게 해주는 이유는 개발 주기를 보면 알 수 있다. 
1) 하나의 작은 단위의 테스트 코드를 작성
2) 테스트코드를 통과시키기 위해 최소한의 코드로 구현
3) 통과하면 리펙토링
4) 리펙토링한 코드를 다시 테스트
5) 통과하면 다음 테스트 코드 구현

이렇게 테스트 코드 정의를 통해 목적을 명시하고 중간중간 수많은 리팩토링이 있기 때문에 클린코드를 작성하는데 좋은 것이다. 유지보수, 버그 예방 측면에서도 좋다. 

실제로 TDD 를 적용한 경우 결함율(버그)가 약 40~90% 정도 줄어들었다는 사례가 있다(Microsoft, IBM)

하지만 이러한 TDD 는 장점만 있는게 아니다. 작용 반작용이 있듯이 단점도 존재한다. 가장 큰 단점은 생산성의 저하이다. 아무래도 중간중간 수많은 테스트와 리팩토링 때문에 개발 시간 자체가 오래 걸린다는 것이다.

나는 TDD 가 기존의 전통적인 개발 프로세스에 비해 구조 상 안정적인 방법임에는 틀림없다고 생각한다. 하지만 시장에 빠르게 기능을 출시하고 검증해야 하는 경우라면 어떨까? 나는 이 경우엔 일부만 TDD 를 적용하고 추후 점진적으로 리팩토링 하는 것이 좋다고 생각한다. 오랜 시간을 들여 코드를 깔끔하게 작성해놨더니 시장에서 실패한다면 비효율이 발생하기 때문이다. 
(+근데 익숙해지면 TDD 속도도 빨라지지 않을까)

물론 이제 TDD 를 처음 배웠고 많이 적용해보며 연습해야 하지만 항상 특정한 기술에 대해 무작정 좋다고 적용하는게 아니라, 왜 사용하는지 명확한 목적을 알고 상황에 맞게 쓰는게 중요한 부분인 것 같다. 

### 참고
[TDD란? 테스트 주도 개발](https://hanamon.kr/tdd%EB%9E%80-%ED%85%8C%EC%8A%A4%ED%8A%B8-%EC%A3%BC%EB%8F%84-%EA%B0%9C%EB%B0%9C/)

[선택이 아닌 필수 TDD](https://ahea.wordpress.com/2018/09/10/%EC%84%A0%ED%83%9D%EC%9D%B4-%EC%95%84%EB%8B%8C-%ED%95%84%EC%88%98-tdd/)

